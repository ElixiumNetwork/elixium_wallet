%Elixium.Transaction{
  id: "F2111E73C3F819CC066BDF4D9A8A34467E6F769489A1A98888F7C80747592791",
  inputs: [
    %{
      __struct__: Elixium.Utxo,
      addr: "EX08DFqneVKqM797q3MWUvanYhfZCpxvgt1P7hzvjHrNJbxBr8rgV",
      amount: #Decimal<760.9999675795735077691627895>,
      signature: "3044022055787CFA04EC790E4A961CB58FB17144103F42E0976568CAAAA1224B64C0667E02205281F7D207A6B41E2ABC5CE2955AB7B75CC3238E2276FD6F5DA6A63BD271C0F1",
      txoid: "C36F93BE1A82D6B3DDC4E89809BADF56E7F1A03065E2BF004DE799CC3E21D19D:0"
    }
  ],
  outputs: [
    %{
      addr: "EX08DFqneVKqM797q3MWUvanYhfZCpxvgt1P7hzvjHrNJbxBr8rgV",
      amount: #Decimal<758.9999675795735077691627895>,
      txoid: "F2111E73C3F819CC066BDF4D9A8A34467E6F769489A1A98888F7C80747592791:0"
    },
    %{
      addr: "EX08DFqneVKqM797q3MWUvanYhfZCpxvgt1P7hzvjHrNJbxBr8rgV",
      amount: #Decimal<1.0>,
      txoid: "F2111E73C3F819CC066BDF4D9A8A34467E6F769489A1A98888F7C80747592791:1"
    }
  ],
  sigs: [
    {"EX08DFqneVKqM797q3MWUvanYhfZCpxvgt1P7hzvjHrNJbxBr8rgV",
     <<48, 70, 2, 33, 0, 136, 241, 39, 6, 250, 93, 20, 229, 40, 226, 48, 27, 60,
       134, 109, 156, 178, 52, 72, 102, 246, 142, 142, 186, 38, 193, 208, 152,
       81, 190, 165, 40, 2, 33, 0, 216, 180, 26, ...>>}
  ],
  txtype: "P2PK"
}

%Elixium.Transaction{
  id: "C3332393996A6CF336F3233F41FC67045116660EEA64AE307525A9C0DAB6BC79",
  inputs: [
    %{
      __struct__: Elixium.Utxo,
      addr: "EX08DFqneVKqM797q3MWUvanYhfZCpxvgt1P7hzvjHrNJbxBr8rgV",
      amount: #Decimal<760.9999675795735077691627895>,
      signature: "3046022100E51C7005C78115F45C0703FD3CC669467361C961E9ADD34019B163784492869A022100DDA59D5C27A452065E6152299754C5867900EC30EC848744CC5CD819EC539EA8",
      txoid: "C36F93BE1A82D6B3DDC4E89809BADF56E7F1A03065E2BF004DE799CC3E21D19D:0"
    }
  ],
  outputs: [
    %{
      addr: "EX08DFqneVKqM797q3MWUvanYhfZCpxvgt1P7hzvjHrNJbxBr8rgV",
      amount: #Decimal<758.9999675795735077691627895>,
      txoid: "C3332393996A6CF336F3233F41FC67045116660EEA64AE307525A9C0DAB6BC79:0"
    },
    %{
      addr: "EX08DFqneVKqM797q3MWUvanYhfZCpxvgt1P7hzvjHrNJbxBr8rgV",
      amount: #Decimal<1.0>,
      txoid: "C3332393996A6CF336F3233F41FC67045116660EEA64AE307525A9C0DAB6BC79:1"
    }
  ],
  sigs: [
    {"EX08DFqneVKqM797q3MWUvanYhfZCpxvgt1P7hzvjHrNJbxBr8rgV",
     <<48, 69, 2, 33, 0, 197, 71, 84, 58, 107, 238, 87, 151, 186, 51, 67, 50,
       249, 113, 253, 168, 154, 171, 223, 60, 146, 148, 47, 65, 189, 168, 52, 9,
       180, 52, 181, 231, 2, 32, 116, 43, 12, 11, ...>>}
  ],
  txtype: "P2PK"
}

%Elixium.Transaction{
  id: "8D5FF5B061168900FBD5440BCD0071418362662E1ABECD108193C68857EF4044",
  inputs: [
    %{
      __struct__: Elixium.Utxo,
      addr: "EX08DFqneVKqM797q3MWUvanYhfZCpxvgt1P7hzvjHrNJbxBr8rgV",
      amount: #Decimal<761.0002571666047190777110372>,
      signature: "30450221008F530E8CD4F1F3C6C5B4902EF70ABDA355D773B4F993CE424856B3D4BE6B2B2102205E517EEE63C11AA5893AF51C13F1A26EBB4DAE7AC44195DF3F0120429188EECE",
      txoid: "D1100064B5F949D478239F997D1CDB8CCF62CF3BA5E251931A3F0BC43410E81F:0"
    },
    %{
      __struct__: Elixium.Utxo,
      addr: "EX08DFqneVKqM797q3MWUvanYhfZCpxvgt1P7hzvjHrNJbxBr8rgV",
      amount: #Decimal<760.9999675795735077691627895>,
      signature: "3045022100860B37FC96CCB6E526CDB98A48DC9A0CE25E8A7AE74373EF7E5AA088C6E1125602202112EA6AC07184788BEB12A851AA37C8EACE5B5E1546B86F9E6706F2F0FD56B1",
      txoid: "C36F93BE1A82D6B3DDC4E89809BADF56E7F1A03065E2BF004DE799CC3E21D19D:0"
    }
  ],
  outputs: [
    %{
      addr: "EX08DFqneVKqM797q3MWUvanYhfZCpxvgt1P7hzvjHrNJbxBr8rgV",
      amount: #Decimal<758.000224746178226846873827>,
      txoid: "8D5FF5B061168900FBD5440BCD0071418362662E1ABECD108193C68857EF4044:0"
    },
    %{
      addr: "EX08DFqneVKqM797q3MWUvanYhfZCpxvgt1P7hzvjHrNJbxBr8rgV",
      amount: #Decimal<763.0>,
      txoid: "8D5FF5B061168900FBD5440BCD0071418362662E1ABECD108193C68857EF4044:1"
    }
  ],
  sigs: [
    {"EX08DFqneVKqM797q3MWUvanYhfZCpxvgt1P7hzvjHrNJbxBr8rgV",
     <<48, 69, 2, 32, 123, 9, 39, 125, 82, 111, 69, 186, 59, 84, 34, 41, 63,
       194, 152, 166, 193, 150, 103, 24, 100, 92, 47, 88, 35, 70, 200, 88, 225,
       81, 205, 131, 2, 33, 0, 136, 159, 55, 197, ...>>}
  ],
  txtype: "P2PK"
}


{pub, priv} = Elixium.KeyPair.get_from_file("../core/.keys/EX06S1ZGDNRzCBCzWcSnsFdTrxH4ztt55kPZJUNijvUYTbXZG5peL.key")

addr = Elixium.KeyPair.address_from_pubkey(pub)
utxos = Elixium.Store.Utxo.find_by_address(addr)

inputs = Enum.take(utxos, 3)

output_amount = Decimal.new(100)

transaction = %Elixium.Transaction{inputs: inputs}

transaction = Map.put(transaction, :id, Elixium.Transaction.calculate_hash(transaction))

outputs = [%Elixium.Utxo{addr: "EX06S1ZGDNRzCBCzWcSnsFdTrxH4ztt55kPZJUNijvUYTbXZG5peL", amount: output_amount, txoid: "#{transaction.id}:0"}]

transaction = Map.put(transaction, :outputs, outputs)

sig = Elixium.KeyPair.sign(priv, Elixium.Transaction.signing_digest(transaction))

sigs = [{addr, sig}]

transaction = Map.put(transaction, :sigs, sigs)

Elixium.Validator.valid_transaction?(transaction)





|> path([
  :begin,
  {:move_to, 0, 0},
  {:line_to, 80, 0},
  {:line_to, 160, 0},
  {:line_to, 240, 0},
  {:line_to, 300, 0},
  {:line_to, 360, 0},
  {:line_to, 420, 0},
  {:line_to, 480, 0},
  {:line_to, 540, 0},
  {:line_to, 600, 0},
  {:line_to, 600, 0}
  ],
  id: :path_1,
  stroke: {2, :red},
  translate: {130, 600},
  )
  |> Graph.modify(:path_1, &path(&1,
    [
      :begin,
      {:move_to, 0, 0},
      {:line_to, 80, hash_0},
      {:line_to, 160, hash_1},
      {:line_to, 240, hash_2},
      {:line_to, 300, hash_3},
      {:line_to, 360, hash_4},
      {:line_to, 420, hash_5},
      {:line_to, 480, hash_6},
      {:line_to, 540, hash_7},
      {:line_to, 600, hash_8},
      {:line_to, 600, hash_9}
      ]))
